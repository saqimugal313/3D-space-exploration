<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solar System Explorer</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;family=Space+Mono:wght@400;700&amp;display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; }
    
    .space-bg {
      background: radial-gradient(ellipse at center, #0a0a1a 0%, #000005 100%);
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--duration) ease-in-out infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: var(--min-opacity); transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    
    .celestial-body {
      position: absolute;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      transform-style: preserve-3d;
    }
    
    .celestial-body:hover {
      transform: scale(1.1);
    }
    
    .sun {
      background: radial-gradient(circle at 30% 30%, #fff7e6 0%, #ffd93d 20%, #ff9500 50%, #ff6b00 80%, #cc4400 100%);
      box-shadow: 0 0 60px #ff9500, 0 0 120px #ff6b0088, 0 0 200px #ff9500aa, inset -20px -20px 40px #cc440088;
      animation: sunPulse 4s ease-in-out infinite;
    }
    
    @keyframes sunPulse {
      0%, 100% { box-shadow: 0 0 60px #ff9500, 0 0 120px #ff6b0088, 0 0 200px #ff9500aa; }
      50% { box-shadow: 0 0 80px #ffaa00, 0 0 150px #ff6b00aa, 0 0 250px #ff9500cc; }
    }
    
    .mercury {
      background: radial-gradient(circle at 30% 30%, #d4af9f 0%, #a67c52 30%, #665038 60%, #3d2f1f 100%);
      box-shadow: 0 0 8px #a67c5288, inset -3px -3px 8px #00000044;
    }
    
    .venus {
      background: radial-gradient(circle at 30% 30%, #fff8dc 0%, #f5d76e 30%, #e8b839 60%, #d4a839 100%);
      box-shadow: 0 0 12px #f5d76e99, inset -4px -4px 12px #00000033;
      position: relative;
    }
    
    .venus::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(0deg, transparent, transparent 40%, rgba(255,255,255,0.1) 40%, rgba(255,255,255,0.1) 50%);
      border-radius: 50%;
    }
    
    .earth {
      background: radial-gradient(circle at 30% 30%, #87ceeb 0%, #4a90c2 20%, #2d5a87 40%, #1a3a5c 60%, #0d1f33 100%);
      box-shadow: 0 0 20px #4a90c288, inset -8px -8px 20px #00000066;
      position: relative;
      overflow: hidden;
    }
    
    .earth::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(ellipse at 25% 35%, #228b22 0%, transparent 25%),
        radial-gradient(ellipse at 60% 45%, #228b22 0%, transparent 20%),
        radial-gradient(ellipse at 75% 25%, #228b22 0%, transparent 15%);
      border-radius: 50%;
    }
    
    .earth::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.4) 0%, transparent 30%);
      border-radius: 50%;
    }
    
    .mars {
      background: radial-gradient(circle at 30% 30%, #e8a87c 0%, #cd5c5c 30%, #8b3a3a 60%, #4a1a1a 100%);
      box-shadow: 0 0 15px #cd5c5c66, inset -6px -6px 15px #00000055;
    }
    
    .mars::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at 30% 10%, rgba(255,255,255,0.15) 0%, transparent 40%);
      border-radius: 50%;
    }
    
    .jupiter {
      background: radial-gradient(circle at 30% 30%, #f4d47a 0%, #d4a157 20%, #8b6914 40%, #5c4a0f 60%, #2d2408 100%);
      box-shadow: 0 0 25px #d4a15799, inset -12px -12px 25px #00000066;
      position: relative;
      overflow: hidden;
    }
    
    .jupiter::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(0deg, transparent, transparent 30%, rgba(139,85,0,0.3) 30%, rgba(139,85,0,0.3) 40%);
      border-radius: 50%;
    }
    
    .saturn {
      background: radial-gradient(circle at 30% 30%, #f5e6d3 0%, #d4af7a 20%, #b8956a 40%, #8b7355 60%, #5c4a42 100%);
      box-shadow: 0 0 20px #d4af7a99, inset -10px -10px 20px #00000055;
      position: relative;
    }
    
    .saturn::after {
      content: '';
      position: absolute;
      width: 140%;
      height: 30%;
      border: 2px solid rgba(200,170,120,0.5);
      border-radius: 50%;
      top: 35%;
      left: -20%;
      transform: rotateX(75deg);
      box-shadow: 0 0 10px rgba(200,170,120,0.3);
    }
    
    .uranus {
      background: radial-gradient(circle at 30% 30%, #5dd9ff 0%, #4db8dd 20%, #2d8ba3 40%, #1a5a6b 60%, #0d2d3a 100%);
      box-shadow: 0 0 18px #4db8dd88, inset -8px -8px 18px #00000044;
    }
    
    .uranus::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(255,255,255,0.1) 0%, transparent 50%);
      border-radius: 50%;
    }
    
    .neptune {
      background: radial-gradient(circle at 30% 30%, #4169e1 0%, #1e90ff 20%, #1873cc 40%, #0d47a1 60%, #051a4a 100%);
      box-shadow: 0 0 20px #1e90ff99, inset -10px -10px 20px #00000055;
    }
    
    .neptune::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(ellipse at 40% 25%, rgba(70,130,180,0.4) 0%, transparent 30%),
        radial-gradient(ellipse at 60% 55%, rgba(70,130,180,0.3) 0%, transparent 25%);
      border-radius: 50%;
    }
    
    .moon {
      background: radial-gradient(circle at 30% 30%, #e8e8e8 0%, #c4c4c4 30%, #a0a0a0 60%, #707070 100%);
      box-shadow: 0 0 10px #c4c4c466, inset -4px -4px 10px #00000044;
    }
    
    .moon::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 40% 30%, #909090 0%, transparent 15%),
        radial-gradient(circle at 60% 50%, #888888 0%, transparent 10%),
        radial-gradient(circle at 25% 60%, #909090 0%, transparent 12%);
      border-radius: 50%;
    }
    
    .orbit-ring {
      position: absolute;
      border: 1px dashed rgba(100, 150, 255, 0.2);
      border-radius: 50%;
      pointer-events: none;
    }
    
    .info-panel {
      backdrop-filter: blur(10px);
      background: rgba(10, 15, 30, 0.85);
      border: 1px solid rgba(100, 150, 255, 0.3);
    }
    
    .glow-text {
      text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
    }
    
    .control-btn {
      backdrop-filter: blur(5px);
      background: rgba(30, 40, 70, 0.8);
      border: 1px solid rgba(100, 150, 255, 0.4);
      transition: all 0.3s ease;
    }
    
    .control-btn:hover {
      background: rgba(50, 70, 120, 0.9);
      border-color: rgba(100, 150, 255, 0.8);
      box-shadow: 0 0 15px rgba(100, 150, 255, 0.4);
    }
    
    .speed-indicator {
      background: linear-gradient(90deg, #1a1a2e 0%, #16213e 100%);
    }
    
    .tooltip {
      position: absolute;
      padding: 8px 12px;
      background: rgba(10, 15, 30, 0.95);
      border: 1px solid rgba(100, 150, 255, 0.5);
      border-radius: 8px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1000;
      max-width: 200px;
    }
    
    .distance-line {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, transparent, #64b5f6, transparent);
      transform-origin: left center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .label-tag {
      position: absolute;
      padding: 4px 10px;
      background: rgba(10, 15, 30, 0.9);
      border: 1px solid rgba(100, 150, 255, 0.4);
      border-radius: 12px;
      font-size: 11px;
      white-space: nowrap;
      pointer-events: none;
      transform: translateX(-50%);
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full">
  <div id="app" class="h-full w-full space-bg relative overflow-hidden"><!-- Stars Background -->
   <div id="stars-container" class="absolute inset-0"></div><!-- Main Title -->
   <div class="absolute top-4 left-1/2 transform -translate-x-1/2 z-50 text-center">
    <h1 id="main-title" class="text-2xl md:text-3xl font-bold text-cyan-300 glow-text" style="font-family: 'Orbitron', sans-serif;">Solar System Explorer</h1>
    <p class="text-xs text-cyan-500 opacity-70 mt-1" style="font-family: 'Space Mono', monospace;">Click planets to learn more â€¢ Drag to explore â€¢ Scroll to zoom</p>
   </div><!-- Solar System Container -->
   <div id="solar-system" class="absolute inset-0" style="transform-origin: center center;"><!-- Orbit Rings -->
    <div id="mercury-orbit" class="orbit-ring"></div>
    <div id="venus-orbit" class="orbit-ring"></div>
    <div id="earth-orbit" class="orbit-ring"></div>
    <div id="mars-orbit" class="orbit-ring"></div>
    <div id="jupiter-orbit" class="orbit-ring"></div>
    <div id="saturn-orbit" class="orbit-ring"></div>
    <div id="uranus-orbit" class="orbit-ring"></div>
    <div id="neptune-orbit" class="orbit-ring"></div>
    <div id="moon-orbit" class="orbit-ring"></div><!-- Sun -->
    <div id="sun" class="celestial-body sun" data-body="sun">
     <div class="label-tag text-amber-300" style="bottom: -25px; left: 50%;">
      Sun
     </div>
    </div><!-- Mercury -->
    <div id="mercury" class="celestial-body mercury" data-body="mercury">
     <div id="mercury-label" class="label-tag text-gray-400" style="bottom: -20px; left: 50%;">
      Mercury
     </div>
    </div><!-- Venus -->
    <div id="venus" class="celestial-body venus" data-body="venus">
     <div id="venus-label" class="label-tag text-yellow-300" style="bottom: -22px; left: 50%;">
      Venus
     </div>
    </div><!-- Earth -->
    <div id="earth" class="celestial-body earth" data-body="earth">
     <div id="earth-label" class="label-tag text-blue-300" style="bottom: -22px; left: 50%;">
      Earth
     </div>
    </div><!-- Moon -->
    <div id="moon" class="celestial-body moon" data-body="moon">
     <div id="moon-label" class="label-tag text-gray-300" style="bottom: -20px; left: 50%;">
      Moon
     </div>
    </div><!-- Mars -->
    <div id="mars" class="celestial-body mars" data-body="mars">
     <div id="mars-label" class="label-tag text-red-300" style="bottom: -22px; left: 50%;">
      Mars
     </div>
    </div><!-- Jupiter -->
    <div id="jupiter" class="celestial-body jupiter" data-body="jupiter">
     <div id="jupiter-label" class="label-tag text-amber-300" style="bottom: -26px; left: 50%;">
      Jupiter
     </div>
    </div><!-- Saturn -->
    <div id="saturn" class="celestial-body saturn" data-body="saturn">
     <div id="saturn-label" class="label-tag text-amber-100" style="bottom: -26px; left: 50%;">
      Saturn
     </div>
    </div><!-- Uranus -->
    <div id="uranus" class="celestial-body uranus" data-body="uranus">
     <div id="uranus-label" class="label-tag text-cyan-400" style="bottom: -24px; left: 50%;">
      Uranus
     </div>
    </div><!-- Neptune -->
    <div id="neptune" class="celestial-body neptune" data-body="neptune">
     <div id="neptune-label" class="label-tag text-blue-400" style="bottom: -24px; left: 50%;">
      Neptune
     </div>
    </div>
   </div><!-- Distance Lines -->
   <div id="distance-lines" class="absolute inset-0 pointer-events-none"></div><!-- Tooltip -->
   <div id="tooltip" class="tooltip text-cyan-100" style="font-family: 'Space Mono', monospace;"></div><!-- Info Panel -->
   <div id="info-panel" class="info-panel absolute bottom-4 left-4 right-4 md:left-4 md:right-auto md:w-80 rounded-xl p-4 z-40 hidden">
    <div class="flex justify-between items-start mb-3">
     <h2 id="info-title" class="text-lg font-bold text-cyan-300" style="font-family: 'Orbitron', sans-serif;"></h2><button id="close-info" class="text-cyan-500 hover:text-cyan-300 text-xl leading-none">Ã—</button>
    </div>
    <div id="info-content" class="text-sm text-gray-300 space-y-2" style="font-family: 'Space Mono', monospace;"></div>
   </div><!-- Controls Panel -->
   <div class="absolute top-16 right-4 z-40 flex flex-col gap-2"><button id="toggle-orbits" class="control-btn px-3 py-2 rounded-lg text-cyan-300 text-xs" style="font-family: 'Space Mono', monospace;"> ğŸª Orbits: ON </button> <button id="toggle-labels" class="control-btn px-3 py-2 rounded-lg text-cyan-300 text-xs" style="font-family: 'Space Mono', monospace;"> ğŸ·ï¸ Labels: ON </button> <button id="toggle-distances" class="control-btn px-3 py-2 rounded-lg text-cyan-300 text-xs" style="font-family: 'Space Mono', monospace;"> ğŸ“ Distances: OFF </button> <button id="reset-view" class="control-btn px-3 py-2 rounded-lg text-cyan-300 text-xs" style="font-family: 'Space Mono', monospace;"> ğŸ¯ Reset View </button>
   </div><!-- Speed Control -->
   <div class="absolute bottom-4 right-4 z-40 speed-indicator rounded-xl p-3 border border-cyan-900">
    <div class="text-xs text-cyan-400 mb-2" style="font-family: 'Space Mono', monospace;">
     Simulation Speed
    </div>
    <div class="flex items-center gap-2"><button id="speed-down" class="control-btn w-8 h-8 rounded-full text-cyan-300 text-sm">âˆ’</button>
     <div id="speed-display" class="text-cyan-300 font-bold w-12 text-center" style="font-family: 'Orbitron', sans-serif;">
      1x
     </div><button id="speed-up" class="control-btn w-8 h-8 rounded-full text-cyan-300 text-sm">+</button>
    </div><button id="pause-play" class="control-btn w-full mt-2 py-1 rounded-lg text-cyan-300 text-xs" style="font-family: 'Space Mono', monospace;"> â¸ï¸ Pause </button>
   </div><!-- Educational Overlay -->
   <div id="edu-overlay" class="absolute top-16 left-4 z-40 info-panel rounded-xl p-3 max-w-xs">
    <h3 class="text-sm font-bold text-amber-300 mb-2" style="font-family: 'Orbitron', sans-serif;">ğŸ”¬ Orbital Mechanics</h3>
    <p id="edu-text" class="text-xs text-gray-300" style="font-family: 'Space Mono', monospace;">Planets orbit the Sun due to gravity. The closer a planet is to the Sun, the faster it must travel to maintain its orbit.</p>
    <div class="mt-2 flex gap-1"><button id="edu-prev" class="control-btn px-2 py-1 rounded text-xs text-cyan-300">â—€</button> <span id="edu-page" class="text-xs text-cyan-500 flex-1 text-center py-1">1/4</span> <button id="edu-next" class="control-btn px-2 py-1 rounded text-xs text-cyan-300">â–¶</button>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: 'Solar System Explorer',
      mercury_label: 'Mercury',
      venus_label: 'Venus',
      earth_label: 'Earth',
      mars_label: 'Mars',
      jupiter_label: 'Jupiter',
      saturn_label: 'Saturn',
      uranus_label: 'Uranus',
      neptune_label: 'Neptune',
      primary_color: '#22d3ee',
      secondary_color: '#0a0a1a',
      text_color: '#e2e8f0',
      accent_color: '#fbbf24',
      surface_color: '#1e293b',
      font_family: 'Orbitron',
      font_size: 16
    };

    let config = { ...defaultConfig };

    // Celestial body data with accurate orbital parameters
    const celestialData = {
      sun: {
        name: 'The Sun',
        facts: [
          'â­ Type: G-type main-sequence star',
          'ğŸ“ Diameter: 1,392,700 km (109Ã— Earth)',
          'ğŸŒ¡ï¸ Surface Temp: ~5,500Â°C',
          'âš¡ Core Temp: ~15 million Â°C',
          'ğŸ’« Age: ~4.6 billion years',
          'ğŸ”„ Rotation: 25 days (equator)'
        ],
        physics: 'Contains 99.86% of the Solar System\'s mass. Its gravity holds all planets in orbit.'
      },
      mercury: {
        name: 'Mercury',
        facts: [
          'ğŸŒ Type: Terrestrial Planet',
          'ğŸ“ Diameter: 4,879 km (38% of Earth)',
          'ğŸŒ¡ï¸ Avg Temp: 167Â°C',
          'â˜€ï¸ Distance from Sun: 57.9 million km (0.39 AU)',
          'ğŸ”„ Orbital Period: 87.97 days',
          'âš¡ Orbital Speed: 47.4 km/s'
        ],
        physics: 'The smallest and fastest planet. Closest to the Sun with extreme temperature variations.'
      },
      venus: {
        name: 'Venus',
        facts: [
          'ğŸŒ Type: Terrestrial Planet',
          'ğŸ“ Diameter: 12,104 km (95% of Earth)',
          'ğŸŒ¡ï¸ Surface Temp: 464Â°C (hottest!)',
          'â˜€ï¸ Distance from Sun: 108.2 million km (0.72 AU)',
          'ğŸ”„ Orbital Period: 224.7 days',
          'ğŸ”„ Rotates backwards (retrograde)'
        ],
        physics: 'Similar size to Earth but with runaway greenhouse effect. Spins backwards and very slowly.'
      },
      earth: {
        name: 'Earth',
        facts: [
          'ğŸŒ Type: Terrestrial Planet',
          'ğŸ“ Diameter: 12,742 km',
          'ğŸŒ¡ï¸ Avg Temp: 15Â°C',
          'â˜€ï¸ Distance from Sun: 149.6 million km (1 AU)',
          'ğŸ”„ Orbital Period: 365.25 days',
          'ğŸŒ™ Natural Satellites: 1 (Moon)'
        ],
        physics: 'The only known planet with life. Perfect distance from Sun for liquid water to exist.'
      },
      mars: {
        name: 'Mars',
        facts: [
          'ğŸ”´ Type: Terrestrial Planet',
          'ğŸ“ Diameter: 6,779 km (53% of Earth)',
          'ğŸŒ¡ï¸ Avg Temp: -63Â°C',
          'â˜€ï¸ Distance from Sun: 227.9 million km (1.52 AU)',
          'ğŸ”„ Orbital Period: 687 Earth days',
          'ğŸŒ™ Natural Satellites: 2 (Phobos & Deimos)'
        ],
        physics: 'Has the largest volcano (Olympus Mons) and deepest canyon (Valles Marineris) in the Solar System.'
      },
      jupiter: {
        name: 'Jupiter',
        facts: [
          'ğŸª Type: Gas Giant',
          'ğŸ“ Diameter: 139,820 km (11Ã— Earth)',
          'ğŸŒ¡ï¸ Cloud Temp: -110Â°C',
          'â˜€ï¸ Distance from Sun: 778.5 million km (5.2 AU)',
          'ğŸ”„ Orbital Period: 11.86 years',
          'ğŸŒ™ Natural Satellites: 95+ moons'
        ],
        physics: 'Largest planet in the Solar System. Strong magnetic field and the Great Red Spot storm lasting 300+ years.'
      },
      saturn: {
        name: 'Saturn',
        facts: [
          'ğŸª Type: Gas Giant',
          'ğŸ“ Diameter: 116,460 km (9Ã— Earth)',
          'ğŸŒ¡ï¸ Cloud Temp: -140Â°C',
          'â˜€ï¸ Distance from Sun: 1.43 billion km (9.5 AU)',
          'ğŸ”„ Orbital Period: 29.5 years',
          'ğŸ’ Famous for beautiful ring system'
        ],
        physics: 'The least dense planet - would float in water! Rings made of ice and rock from tiny to house-sized.'
      },
      uranus: {
        name: 'Uranus',
        facts: [
          'ğŸª Type: Ice Giant',
          'ğŸ“ Diameter: 50,724 km (4Ã— Earth)',
          'ğŸŒ¡ï¸ Atmosphere: -195Â°C',
          'â˜€ï¸ Distance from Sun: 2.87 billion km (19.2 AU)',
          'ğŸ”„ Orbital Period: 84 years',
          'ğŸŒ€ Rotates on its side (98Â° tilt)'
        ],
        physics: 'Rotates on its side - likely due to ancient collision. One of the windiest planets in the Solar System.'
      },
      neptune: {
        name: 'Neptune',
        facts: [
          'ğŸª Type: Ice Giant',
          'ğŸ“ Diameter: 49,244 km (4Ã— Earth)',
          'ğŸŒ¡ï¸ Atmosphere: -200Â°C (coldest)',
          'â˜€ï¸ Distance from Sun: 4.5 billion km (30 AU)',
          'ğŸ”„ Orbital Period: 165 years',
          'ğŸ’¨ Wind Speeds: Up to 2,100 km/h'
        ],
        physics: 'The windiest planet and farthest from the Sun. Discovered in 1846 through mathematical prediction!'
      },
      moon: {
        name: 'The Moon',
        facts: [
          'ğŸŒ™ Type: Natural Satellite',
          'ğŸ“ Diameter: 3,474 km (27% of Earth)',
          'ğŸŒ¡ï¸ Temp Range: -173Â°C to 127Â°C',
          'ğŸŒ Distance from Earth: 384,400 km',
          'ğŸ”„ Orbital Period: 27.3 days',
          'ğŸ”’ Tidally Locked: Same side always faces Earth'
        ],
        physics: 'The Moon\'s gravity causes Earth\'s tides and slowly stabilizes our planet\'s axial tilt.'
      }
    };

    const educationalContent = [
      {
        title: 'ğŸ”¬ Orbital Mechanics',
        text: 'Planets orbit the Sun due to gravity. The closer a planet is to the Sun, the faster it must travel to maintain its orbit.'
      },
      {
        title: 'ğŸ“ Kepler\'s Laws',
        text: 'Planets move in ellipses with the Sun at one focus. A line from planet to Sun sweeps equal areas in equal times.'
      },
      {
        title: 'âš–ï¸ Gravitational Force',
        text: 'F = G(mâ‚mâ‚‚)/rÂ². Gravity decreases with the square of distance. Double the distance = 1/4 the force.'
      },
      {
        title: 'ğŸ¯ Planet Types',
        text: 'Terrestrial planets (Mercury, Venus, Earth, Mars) are rocky. Gas giants (Jupiter, Saturn) are huge. Ice giants (Uranus, Neptune) are distant and cold.'
      }
    ];

    // Planet orbital data (distances and speeds in relative units)
    const planets = [
      { id: 'mercury', orbitRadius: 90, size: 10, speed: 0.04 },
      { id: 'venus', orbitRadius: 130, size: 16, speed: 0.015 },
      { id: 'earth', orbitRadius: 180, size: 18, speed: 0.01 },
      { id: 'mars', orbitRadius: 240, size: 14, speed: 0.008 },
      { id: 'jupiter', orbitRadius: 380, size: 50, speed: 0.002 },
      { id: 'saturn', orbitRadius: 480, size: 46, speed: 0.0009 },
      { id: 'uranus', orbitRadius: 580, size: 28, speed: 0.0004 },
      { id: 'neptune', orbitRadius: 680, size: 28, speed: 0.0001 }
    ];

    // State
    let state = {
      zoom: 1,
      panX: 0,
      panY: 0,
      speed: 1,
      paused: false,
      showOrbits: true,
      showLabels: true,
      showDistances: false,
      eduPage: 0,
      time: 0,
      isDragging: false,
      lastX: 0,
      lastY: 0
    };

    // Generate stars
    function generateStars() {
      const container = document.getElementById('stars-container');
      container.innerHTML = '';
      const starCount = 200;
      
      for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        const size = Math.random() * 2 + 1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
        star.style.setProperty('--min-opacity', `${Math.random() * 0.3 + 0.2}`);
        container.appendChild(star);
      }
    }

    // Position celestial bodies
    function updatePositions() {
      const container = document.getElementById('solar-system');
      const rect = container.getBoundingClientRect();
      const centerX = rect.width / 2 + state.panX;
      const centerY = rect.height / 2 + state.panY;
      
      const scale = Math.min(rect.width, rect.height) / 800 * state.zoom;
      
      // Sun
      const sunSize = 80 * scale;
      const sun = document.getElementById('sun');
      sun.style.width = `${sunSize}px`;
      sun.style.height = `${sunSize}px`;
      sun.style.left = `${centerX - sunSize/2}px`;
      sun.style.top = `${centerY - sunSize/2}px`;
      
      // Position all planets
      planets.forEach(planet => {
        const angle = state.time * planet.speed;
        const orbitRadius = planet.orbitRadius * scale;
        const x = centerX + Math.cos(angle) * orbitRadius;
        const y = centerY + Math.sin(angle) * orbitRadius;
        const size = planet.size * scale;
        
        const el = document.getElementById(planet.id);
        el.style.width = `${size}px`;
        el.style.height = `${size}px`;
        el.style.left = `${x - size/2}px`;
        el.style.top = `${y - size/2}px`;
        
        // Update orbit ring
        const orbit = document.getElementById(`${planet.id}-orbit`);
        orbit.style.width = `${orbitRadius * 2}px`;
        orbit.style.height = `${orbitRadius * 2}px`;
        orbit.style.left = `${centerX - orbitRadius}px`;
        orbit.style.top = `${centerY - orbitRadius}px`;
        orbit.style.display = state.showOrbits ? 'block' : 'none';
      });
      
      // Moon orbit around Earth
      const earth = document.getElementById('earth');
      const earthRect = earth.getBoundingClientRect();
      const parentRect = document.getElementById('solar-system').getBoundingClientRect();
      const earthX = earthRect.left - parentRect.left + earthRect.width/2;
      const earthY = earthRect.top - parentRect.top + earthRect.height/2;
      
      const moonOrbitRadius = 45 * scale;
      const moonAngle = state.time * 0.008;
      const moonX = earthX + Math.cos(moonAngle) * moonOrbitRadius;
      const moonY = earthY + Math.sin(moonAngle) * moonOrbitRadius;
      const moonSize = 12 * scale;
      
      const moon = document.getElementById('moon');
      moon.style.width = `${moonSize}px`;
      moon.style.height = `${moonSize}px`;
      moon.style.left = `${moonX - moonSize/2}px`;
      moon.style.top = `${moonY - moonSize/2}px`;
      
      const moonOrbit = document.getElementById('moon-orbit');
      moonOrbit.style.width = `${moonOrbitRadius * 2}px`;
      moonOrbit.style.height = `${moonOrbitRadius * 2}px`;
      moonOrbit.style.left = `${earthX - moonOrbitRadius}px`;
      moonOrbit.style.top = `${earthY - moonOrbitRadius}px`;
      moonOrbit.style.display = state.showOrbits ? 'block' : 'none';
      
      // Update labels visibility
      document.querySelectorAll('.label-tag').forEach(label => {
        label.style.display = state.showLabels ? 'block' : 'none';
      });
    }

    function updateDistanceLines(centerX, centerY) {
      const container = document.getElementById('distance-lines');
      container.innerHTML = '';
      
      planets.forEach(planet => {
        const el = document.getElementById(planet.id);
        const rect = el.getBoundingClientRect();
        const parentRect = container.getBoundingClientRect();
        const x = rect.left - parentRect.left + rect.width/2;
        const y = rect.top - parentRect.top + rect.height/2;
        
        createDistanceLine(container, centerX, centerY, x, y, planet.id);
      });
    }

    function createDistanceLine(container, x1, y1, x2, y2, planetId) {
      const dx = x2 - x1;
      const dy = y2 - y1;
      const length = Math.sqrt(dx*dx + dy*dy);
      const angle = Math.atan2(dy, dx) * 180 / Math.PI;
      
      const line = document.createElement('div');
      line.className = 'distance-line';
      line.style.left = `${x1}px`;
      line.style.top = `${y1}px`;
      line.style.width = `${length}px`;
      line.style.transform = `rotate(${angle}deg)`;
      line.style.opacity = '1';
      container.appendChild(line);
    }

    // Animation loop
    function animate() {
      if (!state.paused) {
        state.time += 16 * state.speed;
      }
      updatePositions();
      requestAnimationFrame(animate);
    }

    // Show info panel
    function showInfo(bodyId) {
      const data = celestialData[bodyId];
      if (!data) return;
      
      document.getElementById('info-title').textContent = data.name;
      document.getElementById('info-content').innerHTML = `
        <div class="space-y-1">
          ${data.facts.map(f => `<div class="text-xs">${f}</div>`).join('')}
        </div>
        <div class="mt-3 pt-3 border-t border-cyan-900">
          <div class="text-amber-300 text-xs font-bold mb-1">âš›ï¸ Physics Note:</div>
          <div class="text-xs opacity-80">${data.physics}</div>
        </div>
      `;
      document.getElementById('info-panel').classList.remove('hidden');
    }

    // Update educational content
    function updateEducation() {
      const content = educationalContent[state.eduPage];
      document.querySelector('#edu-overlay h3').textContent = content.title;
      document.getElementById('edu-text').textContent = content.text;
      document.getElementById('edu-page').textContent = `${state.eduPage + 1}/${educationalContent.length}`;
    }

    // Event listeners
    function setupEventListeners() {
      // Celestial body clicks
      document.querySelectorAll('.celestial-body').forEach(body => {
        body.addEventListener('click', (e) => {
          e.stopPropagation();
          showInfo(body.dataset.body);
        });
        
        body.addEventListener('mouseenter', (e) => {
          const tooltip = document.getElementById('tooltip');
          const data = celestialData[body.dataset.body];
          if (data) {
            tooltip.textContent = `Click to learn about ${data.name}`;
            tooltip.style.left = `${e.clientX + 10}px`;
            tooltip.style.top = `${e.clientY + 10}px`;
            tooltip.style.opacity = '1';
          }
        });
        
        body.addEventListener('mouseleave', () => {
          document.getElementById('tooltip').style.opacity = '0';
        });
      });
      
      // Close info panel
      document.getElementById('close-info').addEventListener('click', () => {
        document.getElementById('info-panel').classList.add('hidden');
      });
      
      // Toggle controls
      document.getElementById('toggle-orbits').addEventListener('click', function() {
        state.showOrbits = !state.showOrbits;
        this.textContent = `ğŸª Orbits: ${state.showOrbits ? 'ON' : 'OFF'}`;
      });
      
      document.getElementById('toggle-labels').addEventListener('click', function() {
        state.showLabels = !state.showLabels;
        this.textContent = `ğŸ·ï¸ Labels: ${state.showLabels ? 'ON' : 'OFF'}`;
      });
      
      document.getElementById('toggle-distances').addEventListener('click', function() {
        state.showDistances = !state.showDistances;
        this.textContent = `ğŸ“ Distances: ${state.showDistances ? 'ON' : 'OFF'}`;
        if (!state.showDistances) {
          document.getElementById('distance-lines').innerHTML = '';
        }
      });
      
      document.getElementById('reset-view').addEventListener('click', () => {
        state.zoom = 1;
        state.panX = 0;
        state.panY = 0;
        updatePositions();
      });
      
      // Speed controls
      document.getElementById('speed-up').addEventListener('click', () => {
        state.speed = Math.min(state.speed * 2, 16);
        document.getElementById('speed-display').textContent = `${state.speed}x`;
      });
      
      document.getElementById('speed-down').addEventListener('click', () => {
        state.speed = Math.max(state.speed / 2, 0.25);
        document.getElementById('speed-display').textContent = `${state.speed}x`;
      });
      
      document.getElementById('pause-play').addEventListener('click', function() {
        state.paused = !state.paused;
        this.textContent = state.paused ? 'â–¶ï¸ Play' : 'â¸ï¸ Pause';
      });
      
      // Educational navigation
      document.getElementById('edu-prev').addEventListener('click', () => {
        state.eduPage = (state.eduPage - 1 + educationalContent.length) % educationalContent.length;
        updateEducation();
      });
      
      document.getElementById('edu-next').addEventListener('click', () => {
        state.eduPage = (state.eduPage + 1) % educationalContent.length;
        updateEducation();
      });
      
      // Drag to pan
      const app = document.getElementById('app');
      
      app.addEventListener('mousedown', (e) => {
        if (e.target.closest('.celestial-body') || e.target.closest('button') || e.target.closest('.info-panel')) return;
        state.isDragging = true;
        state.lastX = e.clientX;
        state.lastY = e.clientY;
        app.style.cursor = 'grabbing';
      });
      
      window.addEventListener('mousemove', (e) => {
        if (!state.isDragging) return;
        const dx = e.clientX - state.lastX;
        const dy = e.clientY - state.lastY;
        state.panX += dx;
        state.panY += dy;
        state.lastX = e.clientX;
        state.lastY = e.clientY;
        updatePositions();
      });
      
      window.addEventListener('mouseup', () => {
        state.isDragging = false;
        app.style.cursor = 'default';
      });
      
      // Zoom with scroll
      app.addEventListener('wheel', (e) => {
        e.preventDefault();
        const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
        state.zoom = Math.max(0.3, Math.min(3, state.zoom * zoomFactor));
        updatePositions();
      }, { passive: false });
      
      // Touch support
      let touchStartDist = 0;
      let touchStartZoom = 1;
      
      app.addEventListener('touchstart', (e) => {
        if (e.touches.length === 1) {
          state.isDragging = true;
          state.lastX = e.touches[0].clientX;
          state.lastY = e.touches[0].clientY;
        } else if (e.touches.length === 2) {
          touchStartDist = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          touchStartZoom = state.zoom;
        }
      });
      
      app.addEventListener('touchmove', (e) => {
        e.preventDefault();
        if (e.touches.length === 1 && state.isDragging) {
          const dx = e.touches[0].clientX - state.lastX;
          const dy = e.touches[0].clientY - state.lastY;
          state.panX += dx;
          state.panY += dy;
          state.lastX = e.touches[0].clientX;
          state.lastY = e.touches[0].clientY;
          updatePositions();
        } else if (e.touches.length === 2) {
          const dist = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          state.zoom = Math.max(0.3, Math.min(3, touchStartZoom * (dist / touchStartDist)));
          updatePositions();
        }
      }, { passive: false });
      
      app.addEventListener('touchend', () => {
        state.isDragging = false;
      });
      
      // Resize handler
      window.addEventListener('resize', updatePositions);
    }

    // Render function for config changes
    async function onConfigChange(cfg) {
      const customFont = cfg.font_family || defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      document.getElementById('main-title').textContent = cfg.main_title || defaultConfig.main_title;
      document.getElementById('main-title').style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      // Update planet labels
      document.getElementById('mercury-label').textContent = cfg.mercury_label || defaultConfig.mercury_label;
      document.getElementById('venus-label').textContent = cfg.venus_label || defaultConfig.venus_label;
      document.getElementById('earth-label').textContent = cfg.earth_label || defaultConfig.earth_label;
      document.getElementById('mars-label').textContent = cfg.mars_label || defaultConfig.mars_label;
      document.getElementById('jupiter-label').textContent = cfg.jupiter_label || defaultConfig.jupiter_label;
      document.getElementById('saturn-label').textContent = cfg.saturn_label || defaultConfig.saturn_label;
      document.getElementById('uranus-label').textContent = cfg.uranus_label || defaultConfig.uranus_label;
      document.getElementById('neptune-label').textContent = cfg.neptune_label || defaultConfig.neptune_label;
      document.getElementById('moon-label').textContent = cfg.moon_label || defaultConfig.moon_label;
      
      // Apply colors
      document.querySelectorAll('.text-cyan-300').forEach(el => {
        el.style.color = cfg.primary_color || defaultConfig.primary_color;
      });
      
      document.querySelectorAll('.text-amber-300').forEach(el => {
        el.style.color = cfg.accent_color || defaultConfig.accent_color;
      });
      
      // Apply font size scaling
      const baseSize = cfg.font_size || defaultConfig.font_size;
      document.getElementById('main-title').style.fontSize = `${baseSize * 1.75}px`;
      document.querySelectorAll('.label-tag').forEach(el => {
        el.style.fontSize = `${baseSize * 0.7}px`;
      });
    }

    // Initialize
    function init() {
      generateStars();
      setupEventListeners();
      updateEducation();
      animate();
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities: (cfg) => ({
            recolorables: [
              {
                get: () => cfg.secondary_color || defaultConfig.secondary_color,
                set: (v) => { cfg.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
              },
              {
                get: () => cfg.surface_color || defaultConfig.surface_color,
                set: (v) => { cfg.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); }
              },
              {
                get: () => cfg.text_color || defaultConfig.text_color,
                set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
              },
              {
                get: () => cfg.primary_color || defaultConfig.primary_color,
                set: (v) => { cfg.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); }
              },
              {
                get: () => cfg.accent_color || defaultConfig.accent_color,
                set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => cfg.font_family || defaultConfig.font_family,
              set: (v) => { cfg.font_family = v; window.elementSdk.setConfig({ font_family: v }); }
            },
            fontSizeable: {
              get: () => cfg.font_size || defaultConfig.font_size,
              set: (v) => { cfg.font_size = v; window.elementSdk.setConfig({ font_size: v }); }
            }
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['main_title', cfg.main_title || defaultConfig.main_title],
            ['mercury_label', cfg.mercury_label || defaultConfig.mercury_label],
            ['venus_label', cfg.venus_label || defaultConfig.venus_label],
            ['earth_label', cfg.earth_label || defaultConfig.earth_label],
            ['mars_label', cfg.mars_label || defaultConfig.mars_label],
            ['jupiter_label', cfg.jupiter_label || defaultConfig.jupiter_label],
            ['saturn_label', cfg.saturn_label || defaultConfig.saturn_label],
            ['uranus_label', cfg.uranus_label || defaultConfig.uranus_label],
            ['neptune_label', cfg.neptune_label || defaultConfig.neptune_label]
          ])
        });
        config = window.elementSdk.config;
      }
      
      onConfigChange(config);
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce2f04a42111a72',t:'MTc3MTEzODkzNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>